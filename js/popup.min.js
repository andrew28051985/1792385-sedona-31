const searchLink=document.querySelector(".search__link"),popup=document.querySelector(".popup"),formSearch=popup.querySelector(".form-search"),formSearchInputArrival=popup.querySelector(".form-search__input-date-arrival"),formSearchInputDeparture=popup.querySelector(".form-search__input-date-departure"),formSearchInputChild=popup.querySelector(".form-search__input-number-child"),formSearchInputOld=popup.querySelector(".form-search__input-number-old");let clickCount=0,isStorageSupport=!0,storage="";try{storage=localStorage.getItem("NumberChild"),storageOld=localStorage.getItem("NumberOld")}catch(r){isStorageSupport=!1}popup.classList.add("popup-show"),searchLink.addEventListener("click",function(r){r.preventDefault(),clickCount=++clickCount,1==clickCount?(popup.classList.remove("popup-show"),popup.classList.add("popup-on")):(popup.classList.add("popup-show"),clickCount=0,popup.classList.remove("popup-on"),popup.classList.remove("popup-error")),(storage||storageOld)&&(formSearchInputChild.value=storage,formSearchInputOld.value=storageOld),formSearchInputArrival.value?formSearchInputDeparture.value?formSearchInputOld.value?formSearchInputChild.value||formSearchInputChild.focus():formSearchInputOld.focus():formSearchInputDeparture.focus():formSearchInputArrival.focus()}),formSearch.addEventListener("submit",function(r){formSearchInputArrival.value&&formSearchInputDeparture.value&&formSearchInputChild.value&&formSearchInputOld.value?isStorageSupport&&(localStorage.setItem("NumberChild",formSearchInputChild.value),localStorage.setItem("NumberOld",formSearchInputOld.value)):(r.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"),formSearchInputArrival.value?formSearchInputDeparture.value?formSearchInputOld.value?formSearchInputChild.value||formSearchInputChild.focus():formSearchInputOld.focus():formSearchInputDeparture.focus():formSearchInputArrival.focus())}),window.addEventListener("keydown",function(r){27===r.keyCode&&(popup.classList.contains("popup-show")||(r.preventDefault(),popup.classList.add("popup-show"),popup.classList.remove("popup-on"),popup.classList.remove("popup-error"),clickCount=0))});
